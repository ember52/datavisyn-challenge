graph LR
    subgraph "modern-webapp Helm Chart"
        subgraph "Init Container"
            PIP["pip install<br/>fastapi, uvicorn"]
        end

        subgraph "Backend Pod"
            API["FastAPI<br/>GET /api/me"]
            SECRET["API Key<br/>K8s Secret"]
        end

        subgraph "Frontend Pod"
            NGINX["NGINX<br/>Serves index.html"]
            JS["app.js<br/>fetch /api/me"]
        end

        subgraph "OAuth2 Proxy - subchart"
            OAP["OAuth2 Proxy<br/>Keycloak OIDC"]
        end
    end

    PIP -->|"shared volume"| API
    SECRET -->|"env var"| API
    JS -->|"API call"| API

    style PIP fill:#f39c12,color:#fff
    style API fill:#2ecc71,color:#fff
    style NGINX fill:#3498db,color:#fff
    style OAP fill:#1abc9c,color:#fff
    style SECRET fill:#e74c3c,color:#fff
